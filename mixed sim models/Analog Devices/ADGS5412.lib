* ADGS5412 SPICE Macro-model
* Generic Desc: Serially-Controlled, High Voltage Latch-Up Proof Quad SPST Switch
* Developed by: MPorley / ADGT
* Revision History: 1.0 (05/2017)
* Copyright 2017 by Analog Devices, Inc.
*
* Refer to http://www.analog.com/Analog_Root/static/techSupport/designTools/spiceModels/license/spice_general.html for License Statement. Use of this model 
* indicates your acceptance of the terms and provisions in the License Statement.
*
* Begin Notes:
* The model will work on Vdd/Vss from 9V to 40V single supply and +/-9V to +/-22V dual supply.
* The model provides parametric specifications at +/-15V only and is not variable with Vdd and Vss changes. Please see datasheet page 3.
* The model is identical to the ADG5412 spice model with a RESET/VL pin. 
* The model is operational at RESET/VL level from 2.7V and 5.5V only. 
* Ensure 120us from the time of power-up or RESET before any logic command is issued. 
*  
* Not Modeled:
* SPI Line interface and functionality is not modeled.
* The model would instead use a parallel line interface to control the switches.
* Please see Connections Section below.
*
* Parameters modeled include:
*	On Resistance
*	Ton and Toff
*	Break-Before-Make
*	Off Isolation
*	Crosstalk
*	Supply Currents: Iss/Idd
*   Cs/Cd Off
*   Bandwidth
*   Charge Injection
*
* Connections
*      1  = D1
*      2  = S1
*      3  = VSS
*      4  = GND
*      5  = S4
*      6  = D4
*      7  = NIC
*      8  = NIC
*      9  = RESET/VL
*      10 = NIC
*      11 = GND
*      12 = NIC
*      13 = D3
*      14 = S3
*      15 = VDD
*      16 = NIC
*      17  = S2
*      18 = D2
*      19 = NIC
*      20 = LOGIC CONTROL FOR SWITCH 1 (S1/D1)
*      21 = LOGIC CONTROL FOR SWITCH 2 (S2/D2)
*      22 = LOGIC CONTROL FOR SWITCH 3 (S3/D3)
*      23 = LOGIC CONTROL FOR SWITCH 4 (S4/D4)
*      24 = NIC
*****************

.SUBCKT ADGS5412 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24

.MODEL VON VSWITCH(Von=5 Voff=0.8 Ron=0.001 Roff=1000000000000)
.MODEL VOFF VSWITCH(Von=0.8 Voff=5 Ron=0.001 Roff=1000000000000)
.MODEL VEN VSWITCH(Von=5 Voff=0.8 Ron=450000 Roff=330000)
.MODEL VRESET VSWITCH(Von=5 Voff=0.8 Ron=2700000 Roff=1000)
.MODEL DCLAMP D(IS=1E-15 IBV=1E-13)

* CROSSTALK
C31 14 5 1e-012
C30 17 5 1e-012
C29 17 14 1e-012
C28 2 5 1e-012
C27 2 14 1e-012
C25 2 17 1e-012

* RESET/VL
S30 9 119 9 4 VRESET
C26 119 4 6e-010

* GND 4 AND 11
R45 11 4 1e-015

* ESD PROTECTION DIODES
D4 3 1 DCLAMP
D3 1 15 DCLAMP
D2 3 2 DCLAMP
D1 2 15 DCLAMP

* OFF ISOLATION
C6 2 1 2e-012

* SOURCE/DRAIN ON/OFF LEAKAGE CURRENT
R11 1 4 1000000000
Ech13 31 4 VALUE = { IF(V(20)>=2, 5 , 0.8 ) }
gI1 1 4 31 4 1e-009
R10 2 4 1000000000
Ech12 32 4 VALUE = { IF(V(20)>=2, 5 , 0.8 ) }
gI3 2 4 32 4 1e-009

* CHARGE INJECTION
S7 113 30 29 4 VOFF
R9 29 28 8 
R8 29 27 8
Ech11 28 4 VALUE = { IF(V(20)>=2, 5 , 0 ) }
Ech10 27 4 VALUE = { IF(V(113)<3.55, 0 , 5 ) }
S6 113 111 120 4 VOFF
R7 120 118 8
R6 120 115 8
Ech9 118 4 VALUE = { IF(V(20)>=2, 5 , 0 ) }
Ech8 115 4 VALUE = { IF(V(113)<3.55, 0 , 5 ) }
C5 1 30 9.5e-011
C4 2 111 9.5e-011

* CS/CD OFF AND BANDWIDTH
C3 1 4 15e-012
C2 2 4 15e-012

* ON RESISTANCE
R1 51 1 8
Ech7 34 4 VALUE = { IF (((V(26)-V(1))<0) & ((V(26)-V(1))>=-13.5),0.06*(V(26)-V(1))*(V(26)-V(1)), 0) }
R4 109 102 0.001
Ech6 102 4 VALUE = { IF (((V(26)-V(1))>0) & ((V(26)-V(1))>14),((23-((V(26)-V(1)-13)*1.8))*0.52), 0) }
R3 109 112 0.001
Ech5 112 4 VALUE = { IF (((V(26)-V(1))<0) & ((V(26)-V(1))<-13.5) ,11+((V(1)-V(26)-13.5)*(-0.5)), 0) }
R2 109 110 0.001
Ech4 110 4 VALUE = { IF (((V(26)-V(1))>0) & ((V(26)-V(1))<=14),0.056*(V(1)-V(26))*(V(1)-V(26)), 0) }
RINA	109 4	1G
EOUTA	51 661	POLY(2) (109,4) (331,4) 0 0 0 0 0.999/1000
FCOPYA	4 331	VSENSEA 1
RSENSORA 331 4	1K
VSENSEA	661 26	0

* TON/TOFF/BBM
S5 25 26 113 4  VON
S4 114 35 114 4 VEN
Ech3 114 4 VALUE = { IF(V(20)>=2 & V(119)>=2.7, 5 , 0.8 ) }
R5 109 34 0.001 
eV1 113 4 35 4 1
C1 35 4 1e-012

* VOLTAGE SUPPLY REQUIREMENTS
S1 2 25 108 4 VON
S3 33 108 33 4 VON
Ech2 33 4 VALUE = { IF((V(3)<=-0.5 & V(3)>=-22) & (V(15)<=22 & V(15)>=9), 5 , 0.01 ) }
Ech1 103 4 VALUE = { IF((V(3)>=-0.5 & (V(15)<=40 & V(15)>=9)), 5 , 0.01 ) }
S2 103 108 103 4 VON

* IDD/ISS
I2 15 4 1e-009
I4 3 4 4.5e-005


** SWITCH 2 **


* ESD PROTECTION DIODES
D8 3 18 DCLAMP
D7 18 15 DCLAMP
D6 3 17 DCLAMP
D5 17 15 DCLAMP

* OFF ISOLATION
C12 17 18 2e-012

* SOURCE/DRAIN ON/OFF LEAKAGE CURRENT
R22 18 4 1000000000
Ech26 57 4 VALUE = { IF(V(21)>=2, 5 , 0.8 ) }
gI6 18 4 57 4 1e-009
R21 17 4 1000000000
Ech25 56 4 VALUE = { IF(V(21)>=2, 5 , 0.8 ) }
gI5 17 4 56 4 1e-009

* CHARGE INJECTION
S14 40 48 55 4 VOFF
R20 55 54 8
R19 55 53 8 
Ech24 54 4 VALUE = { IF(V(21)>=2, 5 , 0 ) }
Ech23 53 4 VALUE = { IF(V(40)<3.55, 0 , 5 ) }
S13 40 47 52 4 VOFF
R18 52 50 8 
R17 52 49 8
Ech22 50 4 VALUE = { IF(V(21)>=2, 5 , 0 ) }
Ech21 49 4 VALUE = { IF(V(40)<3.55, 0 , 5 ) }
C11 18 48 9.5e-011
C10 17 47 9.5e-011

* CD/CS OFF AND BANDWIDTH
C8 17 4 15e-012
C9 18 4 15e-012

* ON RESISTANCE
R13 37 18 8
Ech20 41 4 VALUE = { IF (((V(105)-V(18))<0) & ((V(105)-V(18))>=-13.5),0.06*(V(105)-V(18))*(V(105)-V(18)), 0) }
R16 36 46 0.001
Ech19 46 4 VALUE = { IF (((V(105)-V(18))>0) & ((V(105)-V(18))>14),((23-((V(105)-V(18)-13)*1.8))*0.52), 0) }
R15 36 45 0.001 
Ech18 45 4 VALUE = { IF (((V(105)-V(18))<0) & ((V(105)-V(18))<-13.5) ,11+((V(18)-V(105)-13.5)*(-0.5)), 0) }
R14 36 44 0.001 
Ech17 44 4 VALUE = { IF (((V(105)-V(18))>0) & ((V(105)-V(18))<=14),0.056*(V(18)-V(105))*(V(18)-V(105)), 0) }
R12 36 41 0.001
RINB	36 4	1G
EOUTB	37 662	POLY(2) (36,4) (332,4) 0 0 0 0 0.999/1000
FCOPYB	4 332	VSENSEB 1
RSENSORB 332 4	1K
VSENSEB	662 105	0

* TON/ TOFF/ BBM
S12 104 105 40 4 VON
S11 43 38 43 4 VEN
Ech16 43 4 VALUE = { IF(V(21)>=2 & V(119)>=2.7, 5 , 0.8 ) }
eV2 40 4 38 4 1
C7 38 4 1e-012

* VOLTAGE SUPPLY REQUIREMENT
S8 17 104 122 4 VON
S10 42 122 42 4 VON
Ech15 42 4 VALUE = { IF((V(3)<=-0.5 & V(3)>=-22) & (V(15)<=22 & V(15)>=9), 5 , 0.01 ) }
S9 39 122 39 4 VON
Ech14 39 4 VALUE = { IF((V(3)>=-0.5 & (V(15)<=40 & V(15)>=9)), 5 , 0.01 ) }


** SWITCH 3 **


* ESD PROTECTION DIODES
D12 3 13 DCLAMP
D11 13 15 DCLAMP
D10 3 14 DCLAMP
D9 14 15 DCLAMP

* OFF ISOLATIO
C18 14 13 2e-012

* SOURCE/DRAIN ON/OFF LEAKAGE CURRENT
R33 13 4 1000000000
Ech39 79 4 VALUE = { IF(V(22)>=2, 5 , 0.8 ) }
gI8 13 4 79 4 1e-009
R32 14 4 1000000000
Ech38 78 4 VALUE = { IF(V(22)>=2, 5 , 0.8 ) }
gI7 14 4 78 4 1e-009

* CHARGE INJECTION
S21 63 71 77 4 VOFF
R31 77 76 8 
R30 77 75 8 
Ech37 76 4 VALUE = { IF(V(22)>=2, 5 , 0 ) }
Ech36 75 4 VALUE = { IF(V(63)<3.55, 0 , 5 ) }
S20 63 70 74 4 VOFF
R29 74 73 8
R28 74 72 8
Ech35 73 4 VALUE = { IF(V(22)>=2, 5 , 0 ) }
Ech34 72 4 VALUE = { IF(V(63)<3.55, 0 , 5 ) }
C17 13 71 9.5e-011
C16 14 70 9.5e-011

* CD/CS OFF AND BANDWIDTH
C15 13 4 15e-012
C14 14 4 15e-012

* ON RESISTANCE
R24 60 13 8
Ech33 64 4 VALUE = { IF (((V(107)-V(13))<0) & ((V(107)-V(13))>=-13.5),0.06*(V(107)-V(13))*(V(107)-V(13)), 0) }
R27 59 69 0.001
Ech32 69 4 VALUE = { IF (((V(107)-V(13))>0) & ((V(107)-V(13))>14),((23-((V(107)-V(13)-13)*1.8))*0.52), 0) }
R26 59 68 0.001 
Ech31 68 4 VALUE = { IF (((V(107)-V(13))<0) & ((V(107)-V(13))<-13.5) ,11+((V(13)-V(107)-13.5)*(-0.5)), 0) }
R25 59 67 0.001
Ech30 67 4 VALUE = { IF (((V(107)-V(13))>0) & ((V(107)-V(13))<=14),0.056*(V(13)-V(107))*(V(13)-V(107)), 0) }
R23 59 64 0.001
RINC	59 4	1G
EOUTC	60 663	POLY(2) (59,4) (333,4) 0 0 0 0 0.999/1000
FCOPYC	4 333	VSENSEC 1
RSENSORC 333 4	1K
VSENSEC	663 107	0

* TON/ TOFF/ BBM
S19 106 107 63 4 VON
S18 66 61 66 4 VEN
Ech29 66 4 VALUE = { IF(V(22)>=2 & V(119)>=2.7, 5 , 0.8 ) }
eV3 63 4 61 4 1
C13 61 4 1e-012

* VOLTAGE SUPPLY REQUIREMENT
S15 14 106 58 4 VON
S17 65 58 65 4 VON
Ech28 65 4 VALUE = { IF((V(3)<=-0.5 & V(3)>=-22) & (V(15)<=22 & V(15)>=9), 5 , 0.01 ) }
Ech27 62 4 VALUE = { IF((V(3)>=-0.5 & (V(15)<=40 & V(15)>=9)), 5 , 0.01 ) }
S16 62 58 62 4 VON

** SWITCH 4 **

* TON/TOFF/BBM
S25 88 83 88 4 VEN
Ech42 88 4 VALUE = { IF(V(23)>=2 & V(119)>=2.7, 5 , 0.8 ) }
eV4 85 4 83 4 1
C19 83 4 1e-012
S26 116 117 85 4 VON

* ESD PROTECTION DIODES
D16 3 6 DCLAMP
D15 6 15 DCLAMP
D14 3 5 DCLAMP
D13 5 15 DCLAMP

* OFF ISOLATION
C24 5 6 2e-012

* SOURCE/DRAIN ON/OFF LEAKAGE CURRENT
R44 6 4 1000000000
Ech52 101 4 VALUE = { IF(V(23)>=2, 5 , 0.8 ) }
gI10 6 4 101 4 1e-009
R43 5 4 1000000000
Ech51 100 4 VALUE = { IF(V(23)>=2, 5 , 0.8 ) }
gI9 5 4 100 4 1e-009

* CHARGE INJECTION
S28 85 93 99 4 VOFF
R42 99 98 8
R41 99 97 8
Ech50 98 4 VALUE = { IF(V(23)>=2, 5 , 0 ) }
Ech49 97 4 VALUE = { IF(V(85)<3.55, 0 , 5 ) }
S27 85 92 96 4 VOFF
R40 96 95 8
R39 96 94 8
Ech48 95 4 VALUE = { IF(V(23)>=2, 5 , 0 ) }
Ech47 94 4 VALUE = { IF(V(85)<3.55, 0 , 5 ) }
C23 6 93 9.5e-011
C22 5 92 9.5e-011

* CD/CS OFF AND BANDWIDTH
C21 6 4 15e-012
C20 5 4 15e-012

* ON RESISTANCE
R35 82 6 8
Ech46 86 4 VALUE = { IF (((V(117)-V(6))<0) & ((V(117)-V(6))>=-13.5),0.06*(V(117)-V(6))*(V(117)-V(6)), 0) }
R38 81 91 0.001 
Ech45 91 4 VALUE = { IF (((V(117)-V(6))>0) & ((V(117)-V(6))>14),((23-((V(117)-V(6)-13)*1.8))*0.52), 0) }
R37 81 90 0.001
Ech44 90 4 VALUE = { IF (((V(117)-V(6))<0) & ((V(117)-V(6))<-13.5) ,11+((V(6)-V(117)-13.5)*(-0.5)), 0) }
R36 81 89 0.001
R34 81 86 0.001
Ech43 89 4 VALUE = { IF (((V(117)-V(6))>0) & ((V(117)-V(6))<=14),0.056*(V(6)-V(117))*(V(6)-V(117)), 0) }
RIND	81 4	1G
EOUTD	82 664	POLY(2) (81,4) (334,4) 0 0 0 0 0.999/1000
FCOPYD	4 334	VSENSED 1
RSENSORD 334	4 1K
VSENSED	664 117	0

* VOLTAGE SUPPLY REQUIREMENT
S22 5 116 80 4 VON
S24 87 80 87 4 VON
Ech41 87 4 VALUE = { IF((V(3)<=-0.5 & V(3)>=-22) & (V(15)<=22 & V(15)>=9), 5 , 0.01 ) }
S23 84 80 84 4 VON
Ech40 84 4 VALUE = { IF((V(3)>=-0.5 & (V(15)<=40 & V(15)>=9)), 5 , 0.01 ) }

.ENDS ADGS5412