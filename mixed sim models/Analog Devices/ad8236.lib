* AD8236 SPICE Macro-model
* Description: Instrumentation, Amplifier
* Generic Desc: CMOS,  InAmp, 40 microA, MSOP
* Developed by: GC, KF
* Revision History: 08/10/2012 - Updated to new header style
*		    09/18/2015 - Updated model to latest coding standards
* 		    2.0 (beta3) (01/2016)
* Copyright 2009, 2015 by Analog Devices
*
*Refer to http://www.analog.com/Analog_Root/static/techSupport/designTools/spicemodels/license
*for License Statement. Use of this model indicates your acceptance
*of the terms and provisions in the License Staement.
*
* BEGIN Notes: VSY=5V, T=25°C
**Not modeled: Distortion, PSRR, Overload Recovery,
*             Shutdown Turn On/Turn Off time
*
*Parameters modeled include:
*   Vos, Ibias, Supply Current, Input CM limits and Typ output voltge swing over full supply range,
*   Bandwidth over all gains, Slew Rate, Output current limits, Voltage & Current Noise,
*   Capacitive load drive, CMRR, Output Swing vs. Load Resistance
*   Single supply & offset supply functionality.
* END Notes
*    
*
* Node Assignments
*                     -input
*                        |  rg1
*                        |    |   rg2
*                        |    |   |   +input
*                        |    |   |   |   
*                        |    |   |   |     Neg Supply
*                        |    |   |   |     |   ref  out
*                        |    |   |   |     |    |    |    Pos Supply
*                        |    |   |   |     |    |    |     |
*
.SUBCKT AD8236          Vin- RG- RG+  Vin+ VNEG REF  VOUT  VPOS
*
*Amplifiers
X_U1 Vin- RG- VPOSa VNEGa 9 AMPA
X_U2 Vin+ 7 VPOSa VNEGa VOUT AMPB
*
*Charge pump for VPOS and VNEG
VposCP VPOSa VPOS dc 0.58
VnegCP VNEG VNEGa dc 0.57
*
*Gain Error for RG resistor
R5 7 RG+ 6
*
*Adjustable Supply Current for Low Supply Voltage
*I3 VPOS VNEG 6.5E-6
*G1 VPOS VNEG VNEG VPOS 1.5E-6
*
*Resistor Network 
R1 REF RG- 209.8K
R2 RG- 9 52.5K
R3 9 7 52.5K
R4 7 VOUT 209.85K
.ENDS AD8236
*
*
.Subckt AMPA 100 101 102 103 104
*
***Power Supplies***
Rz1	102	1020	 	1e-6
Rz2	103	1030	 	1e-6
Ibias	1020	1030	dc	0.001e-3
DzPS	98	1020	diode
Iquies	1020	98	dc	0.015e-3
RSW1	98	1030	1e-3
R1	1020	99	 	1e7
R2	99	1030	 	1e7
e1	111	110	1020	110	1
e2	110	112	110	1030	1
e3	110	0	99	0	1
*
*
***Inputs***
RSW2	1	100	1e-3
RSW3	9	101	1e-3
VOS	1	2	dc	-500e-6
IbiasP	110	2	dc	1.5e-12
IbiasN	110	9	dc	1.5e-12
RinCMP	110	2	 	110000e6
RinCMN	9	110	 	110000e6
CinCMP	110	2	4.2e-12
CinCMN	9	110	4.2e-12
IOS	9	2	0.0000005e-6
RinDiff	9	2	 	220000e3
CinDiff	9	2	3e-12
*
*
***Non-Inverting Input with Clamp***
g1	3	110	110	2	0.001
RInP	3	110	 	1e3
RX1	40	3	 	0.001
DInP	40	41	diode
DInN	42	40	diode
VinP	111	41	dc	0.46
VinN	42	112	dc	0.46
*
*
***Vnoise***
hVn	6	5	Vmeas1	707.10678
Vmeas1	20	110	DC	0
Vvn	21	110	dc	0.65
Dvn	21	20	DVnoisy
hVn1	6	7	Vmeas2	707.10678
Vmeas2	22	110	dc	0
Vvn1	23	110	dc	0.65
Dvn1	23	22	DVnoisy
*
*
***Inoise***
FnIN	9	110	Vmeas3	0.4071068
Vmeas3	51	110	dc	0
VnIN	50	110	dc	0.65
DnIN	50	51	DINnoisy
FnIN1	110	9	Vmeas4	0.4071068
Vmeas4	53	110	dc	0
VnIN1	52	110	dc	0.65
DnIN1	52	53	DINnoisy
*
FnIP	2	110	Vmeas5	0.4071068
Vmeas5	31	110	dc	0
VnIP	30	110	dc	0.65
DnIP	30	31	DIPnoisy
FnIP1	110	2	Vmeas6	0.4071068
Vmeas6	33	110	dc	0
VnIP1	32	110	dc	0.65
DnIP1	32	33	DIPnoisy
*
*
***CMRR***
RcmrrP	3	10	 	1e12
RcmrrN	10	9	 	1e12
g10	11	110	10	110	-1e-10
Lcmrr	11	12	1e-12
Rcmrr	12	110	 	1e3
e4	5	3	11	110	1
*
*
*
***Feedback Pin***
*RF	105	104	 	0.001
*
*
***VFB Stage***
g200	200	110	7	9	1
R200	200	110	 	250
DzSlewP	201	200	DzSlewP
DzSlewN	201	110	DzSlewN
*
*
***Dominant Pole at 0.1 Hz***
g210	210	110	200	110	0.0025e-6
R210	210	110	 	1591547.63e6
C210	210	110	1e-12
*
*
***Output Voltage Clamp-1***
RX2	60	210	 	0.001
DzVoutP	61	60	DzVoutP
DzVoutN	60	62	DzVoutN
DVoutP	61	63	diode
DVoutN	64	62	diode
VoutP	65	63	dc	5.022
VoutN	64	66	dc	5.022
e60	65	110	111	110	1.01
e61	66	110	112	110	1.01
*
*
***Pole at 1000000Hz***
g220	220	110	210	110	0.001
R220	220	110	 	1000
C220	220	110	159.1548e-12
*
***Pole at 0.4MHz***
g230	230	110	220	110	0.001
R230	230	110	 	1000
C230	230	110	397.8869e-12
*
***Pole at 0.5MHz***
g240	240	110	230	110	0.001
R240	240	110	 	1000
C240	240	110	318.3095e-12
*
***Buffer***
g245	245	110	240	110	0.001
R245	245	110	 	1000
*
***Buffer***
g250	250	110	245	110	0.001
R250	250	110	 	1000
*
***Buffer***
g255	255	110	250	110	0.001
R255	255	110	 	1000
*
***Buffer***
g260	260	110	255	110	0.001
R260	260	110	 	1000
*
***Buffer***
g265	265	110	260	110	0.001
R265	265	110	 	1000
*
***Buffer***
g270	270	110	265	110	0.001
R270	270	110	 	1000
*
***Buffer***
e280	280	110	270	110	1
R280	280	285	 	10
*
***Buffer***
e290	290	110	285	110	1
R290	290	292	 	10
e295	295	110	292	110	1
*
*
***Output Stage***
g300	300	110	295	110	0.001
R300	300	110	 	1000
e301	301	110	300	110	1
Rout	302	303	 	 180
Lout	303	310	 10e-9
Cout	310	110	 2e-12
*
*
***Output Current Limit***
H1	301	304	Vsense1	100
Vsense1	301	302	dc	0
VIoutP	305	304	dc	3.836
VIoutN	304	306	dc	3.836
DIoutP	307	305	diode
DIoutN	306	307	diode
Rx3	307	300	 	0.001
*
*
***Output Clamp-2***
VoutP1	111	73	dc	1.27
VoutN1	74	112	dc	1.26
DVoutP1	75	73	diode
DVoutN1	74	75	diode
RX4	75	310	 	0.001
*
*
***Supply Currents***
FIoVcc	314	110	Vmeas8	1
Vmeas8	310	311	dc	0
R314	110	314	 	1e9
DzOVcc	110	314	diode
DOVcc	102	314	diode
RX5	311	312	 	0.001
FIoVee	315	110	Vmeas9	1
Vmeas9	312	313	dc	0
R315	315	110	 	1e9
DzOVee	315	110	diode
DOVee	315	103	diode
*
*
RSW4	104	313	1e-3
*
*
*** Common Models ***
.model	diode	d(bv=100)
.model	DClamp	D(IS=1E-15 IBV=1E-13 VJ=0.1)
.model	DzVoutP	D(BV=4.3)
.model	DzVoutN	D(BV=4.3)
.model	DzSlewP	D(BV=10.821)
.model	DzSlewN	D(BV=2.842)
.model	DVnoisy	D(IS=7.49e-14 KF=9.87e-18)
.model	DINnoisy	D(IS=8.58e-21 KF=0.00e0)
.model	DIPnoisy	D(IS=8.58e-21 KF=0.00e0)
*
*
.ENDS AMPA
*
.subckt AMPB 100 101 102 103 104
*
***Power Supplies***
Rz1	102	1020	1e-6
Rz2	103	1030	 	1e-6
Ibias	1020	1030	dc	0.001e-3
DzPS	98	1020	diode
Iquies	1020	98	dc	0.015e-3
RSW1	98	1030	1e-3
R1	1020	99	 	1e7
R2	99	1030	 	1e7
e1	111	110	1020	110	1
e2	110	112	110	1030	1
e3	110	0	99	0	1
*
*
***Inputs***
RSW2	1	100	1e-3
RSW3	9	101	1e-3
VOS	1	2	dc	500e-6
IbiasP	110	2	dc	0.000001e-6
IbiasN	110	9	dc	0.000001e-6
RinCMP	110	2	 	110000e6
RinCMN	9	110	 	110000e6
CinCMP	110	2	4.2e-12
CinCMN	9	110	4.2e-12
IOS	9	2	0.0000005e-6
RinDiff	9	2	 	220000e3
CinDiff	9	2	3e-12
*
*
***Non-Inverting Input with Clamp***
g1	3	110	110	2	0.001
RInP	3	110	 	1e3
RX1	40	3	 	0.001
DInP	40	41	diode
DInN	42	40	diode
VinP	111	41	dc	0.46
VinN	42	112	dc	0.46
*
*
***Vnoise***
hVn	6	5	Vmeas1	707.10678
Vmeas1	20	110	DC	0
Vvn	21	110	dc	0.65
Dvn	21	20	DVnoisy
hVn1	6	7	Vmeas2	707.10678
Vmeas2	22	110	dc	0
Vvn1	23	110	dc	0.65
Dvn1	23	22	DVnoisy
*
*
***Inoise***
FnIN	9	110	Vmeas3	0.4071068
Vmeas3	51	110	dc	0
VnIN	50	110	dc	0.65
DnIN	50	51	DINnoisy
FnIN1	110	9	Vmeas4	0.4071068
Vmeas4	53	110	dc	0
VnIN1	52	110	dc	0.65
DnIN1	52	53	DINnoisy
*
FnIP	2	110	Vmeas5	0.4071068
Vmeas5	31	110	dc	0
VnIP	30	110	dc	0.65
DnIP	30	31	DIPnoisy
FnIP1	110	2	Vmeas6	0.4071068
Vmeas6	33	110	dc	0
VnIP1	32	110	dc	0.65
DnIP1	32	33	DIPnoisy
*
*
***CMRR***
RcmrrP	3	10	 	1e12
RcmrrN	10	9	 	1e12
g10	11	110	10	110	-1e-10
Lcmrr	11	12	1e-12
Rcmrr	12	110	 	1e3
e4	5	3	11	110	1
*
*
**
*
***Feedback Pin***
*RF	105	104	 	0.001
*
*
***VFB Stage***
g200	200	110	7	9	1
R200	200	110	 	250
DzSlewP	201	200	DzSlewP
DzSlewN	201	110	DzSlewN
*
*
***Dominant Pole at 0.1 Hz***
g210	210	110	200	110	0.0025e-6
R210	210	110	 	1591547.63e6
C210	210	110	1e-12
*
*
***Output Voltage Clamp-1***
RX2	60	210	 	0.001
DzVoutP	61	60	DzVoutP
DzVoutN	60	62	DzVoutN
DVoutP	61	63	diode
DVoutN	64	62	diode
VoutP	65	63	dc	5.022
VoutN	64	66	dc	5.022
e60	65	110	111	110	1.01
e61	66	110	112	110	1.01
*
*
***Pole at 1000000Hz***
g220	220	110	210	110	0.001
R220	220	110	 	1000
C220	220	110	159.1548e-12
*
***Pole at 0.4MHz***
g230	230	110	220	110	0.001
R230	230	110	 	1000
C230	230	110	397.8869e-12
*
***Pole at 0.5MHz***
g240	240	110	230	110	0.001
R240	240	110	 	1000
C240	240	110	318.3095e-12
*
***Buffer***
g245	245	110	240	110	0.001
R245	245	110	 	1000
*
***Buffer***
g250	250	110	245	110	0.001
R250	250	110	 	1000
*
***Buffer***
g255	255	110	250	110	0.001
R255	255	110	 	1000
*
***Buffer***
g260	260	110	255	110	0.001
R260	260	110	 	1000
*
***Buffer***
g265	265	110	260	110	0.001
R265	265	110	 	1000
*
***Buffer***
g270	270	110	265	110	0.001
R270	270	110	 	1000
*
***Buffer***
e280	280	110	270	110	1
R280	280	285	 	10
*
***Buffer***
e290	290	110	285	110	1
R290	290	292	 	10
e295	295	110	292	110	1
*
*
***Output Stage***
g300	300	110	295	110	0.001
R300	300	110	 	1000
e301	301	110	300	110	1
Rout	302	303	 	 180
Lout	303	310	 1e-9
Cout	310	110	 2e-12
*
*
***Output Current Limit***
H1	301	304	Vsense1	100
Vsense1	301	302	dc	0
VIoutP	305	304	dc	3.836
VIoutN	304	306	dc	3.836
DIoutP	307	305	diode
DIoutN	306	307	diode
Rx3	307	300	 	0.001
*
*
***Output Clamp-2***
VoutP1	111	73	dc	1.27
VoutN1	74	112	dc	1.26
DVoutP1	75	73	diode
DVoutN1	74	75	diode
RX4	75	310	 	0.001
*
*
***Supply Currents***
FIoVcc	314	110	Vmeas8	1
Vmeas8	310	311	dc	0
R314	110	314	1e9
DzOVcc	110	314	diode
DOVcc	102	314	diode
RX5	311	312	 	0.001
FIoVee	315	110	Vmeas9	1
Vmeas9	312	313	dc	0
R315	315	110	 	1e9
DzOVee	315	110	diode
DOVee	315	103	diode
*
*
RSW4	104	313	1e-3
*
*
*** Common Models ***
.model	diode	d(bv=100)
.model	DClamp	D(IS=1E-15 IBV=1E-13 VJ=0.1)
.model	DzVoutP	D(BV=4.3)
.model	DzVoutN	D(BV=4.3)
.model	DzSlewP	D(BV=10.821)
.model	DzSlewN	D(BV=2.842)
.model	DVnoisy	D(IS=7.49e-14 KF=9.87e-18)
.model	DINnoisy	D(IS=8.58e-21 KF=0.00e0)
.model	DIPnoisy	D(IS=8.58e-21 KF=0.00e0)
*
.ENDS AMPB