*Rev.3.0 Oct 2019-MB
*Copyright 2019 by Analog Devices
*
*Refer to http://www.analog.com/Analog_Root/static/techSupport/designTools/spicemodels/license
*for License Statement. Use of this model indicates your acceptance
*of the terms and provisions in the License Statement
*
*Tested on LTspice and MultSIm
*
*
*The ADA4254 model only includes a single input channel.
*
*
*Parameters modeled include:
*   Input CM limits and Typ output voltage swing over full supply range,
*   Bandwidth, Slew Rate, Output current limits, Voltage & Current Noise,
*   Capacitive load drive, Quiescent and dynamic output supply currents,*
*
*
*Not modeled: Vos, Ibias, CMRR, PSRR, Overload Recovery, Digital Interface,
*	Chopping Architecture, Dynamic current on high-voltage supplies,
*	Wirebreak Currents, Excitation Currents.
*
*
*G0 through G5 are used to switch the gain. They map into the G[3:0] and G4 in GAIN_MUX
*	register and G5 in TEST_MUX register. Place a 3V voltage source on the pin to set its
*	corresponding to "1". Ground a pin to turn its corresponding bit
*	to "0". Please refer to the Datasheet for gain setting information.
*
*
*Node Assignments
*               Positive Input
*               |   Negative Input
*               |   |   High-Voltage Positive Supply
*               |   |   |    High-Voltage Negative Supply
*               |   |   |    |    Low-Voltage Positive Supply
*               |   |   |    |    |    Low-Voltage Negative Supply
*               |   |   |    |    |    |    Output Common-Mode Voltage
*               |   |   |    |    |    |    |    Negative Output
*               |   |   |    |    |    |    |    |    Positive Output
*               |   |   |    |    |    |    |    |    |    G[0]
*               |   |   |    |    |    |    |    |    |    |  G[1]
*               |   |   |    |    |    |    |    |    |    |  |  G[2]
*               |   |   |    |    |    |    |    |    |    |  |  |  G[3]
*               |   |   |    |    |    |    |    |    |    |  |  |  |  G[4]
*               |   |   |    |    |    |    |    |    |    |  |  |  |  |  G[5]
*               |   |   |    |    |    |    |    |    |    |  |  |  |  |  |
.Subckt ADA4254 +IN -IN VDDH VSSH AVDD AVSS VOCM -OUT +OUT G0 G1 G2 G3 G4 G5
R1 0 innoise2 Rideal 3e9
R2 innoise1 0 Rideal 3e9
R3 innoise1 innoise2 Rideal 3e9
C1 innoise2 0 4.7p
C2 innoise2 innoise1 11p
C3 0 innoise1 4.7p
R4 0 vilim1 Rideal 100k
C4 vilim1 0 0.1p
C5 0 vilim2 0.1p
R5 vilim2 0 Rideal 100k
R6 N077 0 Rideal 1e4
R7 0 N088 Rideal 1e4
D1 N062 N072 Dn1
D2 N061 N071 Dn1
H1 N081 N078 V3 300
V1 N062 0 0.65
V2 N061 0 0.65
H2 N077 N078 V4 300
V3 0 N072 0
V4 0 N071 0
R8 N103 VDDH 1e-6
R9 N129 VSSH 1e-6
E4 N104 0 N103 0 1
E5 0 N130 0 N129 1
I1 N103 0 580e-6
I2 0 N129 750e-6
D3 N066 N068 Dshort
D4 N068 N065 Dshort
D5 N092 N096 Dshort
D6 N101 N092 Dshort
V11 VDDH-INT P001 2
V12 VDDH-INT N102 2
V13 N066 VSSH-INT 2.75
V14 N101 VSSH-INT 2.75
R16 N068 N077 Rideal 1m
R17 N092 N088 Rideal 1m
V15 g11 N080 0
F1 0 g1111 V8 -1
F2 0 g1222 V15 -1
C6 g11 0 5p
E13 VOCM-INT AVSS-INT VOCM AVSS-INT 1
R29 VOCM AVSS-INT Rideal 1e9
V8 g12 N090 0
D11 N064 N074 Dn2
D12 N063 N073 Dn2
V20 N064 0 0.65
V21 N063 0 0.65
V22 0 N074 0
V23 0 N073 0
E20 VinR1 0 N081 0 1
S1 N114 N105 g0 0 SWg
S2 N115 P002 g3 0 SWg
S3 N116 P003 g0 0 SWg
S4 N118 P004 g3 0 SWg
R38 g12 N105 Rideal 1.9755k
R41 g12 P002 Rideal 3.955k
R42 g12 P003 Rideal 7.915k
R43 g12 P004 Rideal 15.83k
R44 g3 0 10k
R45 g2 0 10k
R46 g1 0 10k
R47 g0 0 10k
R33 g12 P005 Rideal 31.65k
R48 g12 N107 Rideal 63.37k
R49 g12 N108 Rideal 126.7k
R50 g12 N106 Rideal 253.8k
R51 g12 N109 Rideal 508.6k
R52 g12 N110 Rideal 1021k
S5 N126 N114 g1 0 SWg
S6 N142 N126 g3 0 SWg
S7 N125 N115 g1 0 SWg
S8 N127 N116 g3 0 SWg
S9 N113 P005 g0 0 SWg
S10 N128 N113 g1 0 SWg
S11 N141 N128 g2 0 SWg
S12 N119 N107 g1 0 SWg
S13 N132 N119 g2 0 SWg
S14 N120 N108 g0 0 SWg
S15 N133 N120 g2 0 SWg
R53 g12 N111 Rideal 2057k
R54 g12 N112 Rideal 4175k
S16 N117 N106 g2 0 SWg
S17 N124 N109 g0 0 SWg
S18 N135 N124 g1 0 SWg
S19 N121 N110 g1 0 SWg
S20 N122 N111 g0 0 SWg
v44 vf 0 2.5
S21 g11 P006 vf g2 SWg
S22 N139 N125 vf g0 SWg
S23 g11 P007 vf g2 SWg
S24 N140 N127 vf g1 SWg
S25 g11 P008 vf g2 SWg
S26 g11 P009 vf g2 SWg
S27 N143 N131 vf g1 SWg
S28 N131 N118 vf g0 SWg
S29 g11 P010 vf g3 SWg
S30 N144 N132 vf g0 SWg
S31 g11 P011 vf g3 SWg
S32 P012 N133 vf g1 SWg
S33 g11 P013 vf g3 SWg
S34 N134 N117 vf g0 SWg
S35 N146 N134 vf g1 SWg
S36 g11 N146 vf g3 SWg
S37 N147 N135 vf g2 SWg
S38 g11 N147 vf g3 SWg
S39 N136 N121 vf g0 SWg
S40 N145 N136 vf g2 SWg
S41 g11 N145 vf g3 SWg
S42 N137 N122 vf g1 SWg
S43 N148 N137 vf g2 SWg
S44 g11 N148 vf g3 SWg
S45 N123 N112 vf g0 SWg
S46 N138 N123 vf g1 SWg
S47 N149 N138 vf g2 SWg
S48 g11 N149 vf g3 SWg
R18 g5 0 10k
R55 g4 0 10k
R56 g1111 N052 Rideal 128k
R57 g1111 N053 Rideal 176k
R58 g1111 N054 Rideal 160k
R59 g1222 N045 Rideal 128k
S49 N055 N052 vf g4 SWg
S50 -OUT N055 vf g5 SWg
S51 -OUT N053 g4 0 SWg
S53 N056 N054 g5 0 SWg
S54 -OUT N056 vf g4 SWg
S55 N050 N045 vf g4 SWg
S56 +OUT N050 vf g5 SWg
S57 +OUT N046 g4 0 SWg
S59 N051 N047 g5 0 SWg
S60 +OUT N051 vf g4 SWg
E18 N065 P014 0 n44 -1
R63 P001 P014 1m
E21 N096 P015 0 n44 -1
R69 N102 P015 1m
E24 VinL1 0 N088 0 1
R65 n44 0 1k
F7 0 N097 V8 0.5
F8 0 N097 V15 0.5
R83 clip4 0 1k
C21 clip3 0 1µ
D17 N097 clip4 D
D18 clip3 N097 D
R84 clip3 0 1k
C22 clip4 0 1µ
B2 n44 0 V=128*V(clip3)+128*V(clip4)
C7 g12 0 5p
D19 N060 N070 Dcn
D20 N059 N069 Dcn
V34 N060 0 0.65
V35 N059 0 0.65
V36 0 N070 0
V37 0 N069 0
D21 N076 N083 Dcn
D22 N075 N082 Dcn
V38 N076 0 0.65
V39 N075 0 0.65
V40 0 N083 0
V41 0 N082 0
R71 N095 N093 Rideal 10
L5 N094 N093 1µ
C17 N095 N094 100µ
R72 N095 0 Rideal 1.111
F9 0 N100 V36 0.70710678
R73 N100 0 Rideal 1
E14 N093 0 N100 0 1
F10 0 N100 V37 -0.70710678
G6 0 innoise1 N095 0 18
R74 N086 N084 Rideal 10
L6 N085 N084 1µ
C20 N086 N085 50µ
R75 N086 0 Rideal 1.111
F5 0 N087 V41 0.70710678
R76 N087 0 Rideal 1
E22 N084 0 N087 0 1
F6 0 N087 V40 -0.70710678
G8 0 innoise2 N086 0 18
R23 0 vilim1 Rideal 100k
R24 vilim2 0 Rideal 100k
C8 0 vilim2 .1p
C9 vilim1 0 0.1p
G4 0 N077 vilim1 0 -1e-4
G5 0 N088 vilim2 0 -1e-4
L1 N142 P006 0.9m
L2 N139 P007 1m
L3 N140 P008 1m
L4 N143 P009 1.5m
L7 N141 P010 0.7m
L8 N144 P011 2m
L9 P012 P013 0.1µ
C11 VinR 0 500p
R25 VinR 0 Rideal 100k
C12 0 VinL 500p
R27 0 VinL Rideal 100k
E12 N079 0 VinR 0 1
E15 N089 0 VinL 0 1
B6 0 VinR I={LIMIT (-1e-3*V(VinR, VinR1), 400e-6, -400e-6)}
B7 0 VinL I={LIMIT (-1e-3*V(VinL, VinL1), 400e-6, -400e-6)}
C14 -OUT g1111 1.9p
R31 g1222 N047 Rideal 160k
R32 g1222 N046 Rideal 176k
R14 innoise2 +IN 600
R15 innoise1 -IN 600
G2 0 vilim1 innoise2 0 2e-5
G3 0 vilim2 innoise1 0 2e-5
R10 N031 REF Rideal 2e7
R11 REF N040 Rideal 2e7
R19 N031 N040 Rideal 5e7
C10 N031 REF 4e-12
C13 REF N040 4e-12
C16 N031 N040 1e-12
V5 N005 REF 0.65
V6 REF N017 0
D7 N005 N017 DVnoisy
V7 N006 REF 0.65
V9 REF N018 0
D8 N006 N018 DVnoisy
H3 N031 N032 V6 1100
H4 N033 N032 V9 1100
G7 REF vin-int N033 N040 0.001
R26 vin-int REF Rideal 1e8
R28 N034 REF Rideal 7.962e5
C18 N034 REF 1e-7
G9 REF N035 N034 REF 0.001
R30 N035 REF Rideal 1000
C19 N035 REF 26.528e-12
G10 REF N036 N035 REF 1e-3
R34 N036 REF Rideal 1k
E1 vout-int REF N036 REF 1
R35 N038 N037 3
L10 +OUT N038 1e-9
C23 +OUT REF 1e-12
V10 N037 vout-int 0
R40 N041 AVDD 1e-6
R60 N048 AVSS 1e-6
R61 N041 N043 Rideal 10e6
R70 N043 N048 Rideal 10e6
I3 N041 N048 950µ
E2 N044 0 N043 0 1
E3 N042 N044 N041 N044 1
E6 N044 N049 N044 N048 1
B4 REF N034 I={limit(V(vin-int, REF)*1.256e-5,.1601,-.1601)}
R78 VOCM-INT N031 2
R79 N040 g1222 2
V28 N004 N011 .336
V29 N012 N004 0.536
D29 N011 N021 D
D30 N021 N012 D
B5 vout-int N004 V=-100*I(V10)
R85 N021 N036 1m
R86 N023 REF Rideal 2e7
R87 REF N039 Rideal 2e7
R88 N023 N039 Rideal 5e7
C24 N023 REF 4e-12
C25 REF N039 4e-12
C26 N023 N039 1e-12
V30 N002 REF 0.65
V31 REF N013 0
D31 N002 N013 DVnoisy
V32 N003 REF 0.65
V33 REF N014 0
D32 N003 N014 DVnoisy
H5 N023 N024 V31 707.10678
H6 N025 N024 V33 707.10678
G12 REF vin-int1 N025 N039 1e-3
R89 vin-int1 REF Rideal 1e8
R90 N026 REF Rideal 7.962e5
C27 N026 REF 1e-7
G13 REF N027 N026 REF 0.001
R91 N027 REF Rideal 1000
C28 N027 REF 26.528e-12
G14 REF N028 N027 REF 1e-3
R92 N028 REF Rideal 1k
E9 vout-int1 REF N028 REF 1
R93 N030 N029 3
L11 -OUT N030 1e-9
C29 -OUT REF 1e-12
V42 N029 vout-int1 0
B10 REF N026 I={limit(V(vin-int1, REF)*1.256e-5,.1601,-.1601)}
R102 VOCM-INT N023 2
R103 N039 g1111 2
V52 N001 N007 .336
V53 N008 N001 0.536
D45 N007 N020 D
D46 N020 N008 D
B11 vout-int1 N001 V=-100*I(V42)
R107 N020 N028 1m
C30 +OUT g1222 1.9p
D15 N022 N015 D
D16 N016 N022 D
V18 N016 AVSS-INT 0.8
V19 AVDD-INT N015 0.8
R12 N022 N034 1m
D25 N019 N009 D
D26 N010 N019 D
V45 AVDD-INT N009 0.8
R13 N019 N026 1m
V46 N010 AVSS-INT 0.8
R37 VDDH-INT N104 1m
R39 VSSH-INT N130 1m
R§1m AVDD-INT N042 1m
R80 AVSS-INT N049 1m
R77 REF N044 1m
D9 N067 N057 D
D10 N058 N067 D
V16 AVDD-INT N057 0.7
R81 N067 g1222 1m
V24 N058 AVSS-INT 0.7
D13 N091 N099 D
D14 N098 N091 D
V25 AVDD-INT N099 0.7
R82 N091 g1111 1m
V26 N098 AVSS-INT 0.7
R22 N080 N079 1
R36 N090 N089 1

.model D D
.model	Rideal	res(T_ABS=-273)
.model Dn1 D(IS=5.26e-14 KF=1.49e-19)
.model Dn2 D(IS=2.47e-12 KF=1.42e-19)
.model Dshort D(Rs = 1  Vj = 0.6 )
.model SWg SW(Ron = 1 Vt   = 2V Roff = 1000MEG)
.model Dclip D(Rs = 1  VJ = 0.1 )
.model Dcn D(IS=1.72e-19  KF= 3.52e-19)
.model DVnoisy D(IS=9.39e-13 KF=1.27e-19)
.ends
